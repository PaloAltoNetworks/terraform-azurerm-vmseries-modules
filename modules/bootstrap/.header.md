# Palo Alto Networks Bootstrap Module for Azure

A terraform module for deploying a storage account and the dependencies required to 
[bootstrap a VM-Series firewalls in Azure](https://docs.paloaltonetworks.com/vm-series/9-1/vm-series-deployment/bootstrap-the-vm-series-firewall/bootstrap-the-vm-series-firewall-in-azure.html#idd51f75b8-e579-44d6-a809-2fafcfe4b3b6).

The module does *not* configure the bootstrap images, licenses, or configurations.

## Usage

Simple example usage is shown below. For more *real life* code please check [examples folder](../../examples/).

```hcl
module "bootstrap" {
  source = "PaloAltoNetworks/vmseries-modules/azurerm//modules/bootstrap"

  storage_account_name = "accountname"
  resource_group_name  = "rg-name"
  location             = "West US"

  storage_share_name = "vm_bootstrap"

  files = {
    "files/init-cfg.txt" = "config/init-cfg.txt"
    "files/bootstrap.xml" = "config/bootstrap.xml"
  }
}
```

## Known Limitations

If a file does not exist because it is supposed to be generated by the same Terraform run, add a hash of its contents to
the input `files_md5` as a workaround. For example:

```hcl
module "bootstrap" {
  # ...
  files     = { (local_file.this.filename) = "config/dynamic-content-test.txt" }
  files_md5 = { (local_file.this.filename) = md5(local_file.this.content) }
}

resource "local_file" "this" {
  filename = "test.txt"
  content  = "hello world"
}
```